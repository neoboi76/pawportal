<div class="min-h-screen bg-[#F9FAFB]">
  @if (isLoading) {
    <div class="flex justify-center items-center h-screen">
      <div class="animate-spin rounded-full h-20 w-20 border-t-4 border-b-4 border-[#1E88E5]"></div>
    </div>
  } @else if (dog) {

    <div class="bg-white py-4 px-4 border-b border-gray-200">
      <div class="max-w-7xl mx-auto">
        <a routerLink="/our-pawls" class="inline-flex items-center text-[#1E88E5] hover:text-[#1976D2] font-medium">
          <i class="fas fa-arrow-left mr-2"></i> Back to All Dogs
        </a>
      </div>
    </div>

    <section class="py-12 px-4">
      <div class="max-w-7xl mx-auto">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
          <div class="space-y-6">
            <div class="rounded-2xl overflow-hidden shadow-2xl">
              <img [src]="dog.imageUrl" [alt]="dog.name" class="w-full h-[500px] object-cover">
            </div>
          </div>

          <div class="space-y-6">
            <div>
              <h1 class="text-4xl font-bold text-[#1A1A1A] mb-2">{{ dog.name }}</h1>
              <p class="text-xl text-gray-600">{{ dog.breed }}</p>
            </div>

            <div class="flex gap-3">
              @if (dog.vaccinated) {
                <span class="bg-green-100 text-green-800 px-4 py-2 rounded-full text-sm font-semibold">
                  <i class="fas fa-syringe"></i> Vaccinated
                </span>
              }
              @if (dog.spayedNeutered) {
                <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full text-sm font-semibold">
                  <i class="fas fa-check-circle"></i> Spayed/Neutered
                </span>
              }
            </div>

            <div class="bg-white p-6 rounded-xl shadow-md">
              <h3 class="text-xl font-bold text-[#1A1A1A] mb-4">Quick Facts</h3>
              <div class="grid grid-cols-2 gap-4">
                <div class="flex items-center space-x-3">
                  <div class="w-12 h-12 bg-[#90CAF9] rounded-full flex items-center justify-center">
                    <i class="fas fa-birthday-cake text-white"></i>
                  </div>
                  <div>
                    <p class="text-sm text-gray-600">Age</p>
                    <p class="font-semibold text-[#1A1A1A]">{{ dog.age }} {{ dog.age === 1 ? 'year' : 'years' }}</p>
                  </div>
                </div>

                <div class="flex items-center space-x-3">
                  <div class="w-12 h-12 bg-[#1E88E5] rounded-full flex items-center justify-center">
                    <i class="fas fa-venus-mars text-white"></i>
                  </div>
                  <div>
                    <p class="text-sm text-gray-600">Gender</p>
                    <p class="font-semibold text-[#1A1A1A]">{{ dog.gender }}</p>
                  </div>
                </div>

                <div class="flex items-center space-x-3">
                  <div class="w-12 h-12 bg-[#FFB74D] rounded-full flex items-center justify-center">
                    <i class="fas fa-ruler text-white"></i>
                  </div>
                  <div>
                    <p class="text-sm text-gray-600">Size</p>
                    <p class="font-semibold text-[#1A1A1A]">{{ dog.size }}</p>
                  </div>
                </div>

                <div class="flex items-center space-x-3">
                  <div class="w-12 h-12 bg-green-500 rounded-full flex items-center justify-center">
                    <i class="fas fa-heart text-white"></i>
                  </div>
                  <div>
                    <p class="text-sm text-gray-600">Status</p>
                    <p class="font-semibold text-green-600">{{ dog.status }}</p>
                  </div>
                </div>
              </div>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-md">
              <h3 class="text-xl font-bold text-[#1A1A1A] mb-3">About {{ dog.name }}</h3>
              <p class="text-gray-700 leading-relaxed mb-4">{{ dog.description }}</p>
              
              @if (dog.temperament) {
                <div class="mt-4">
                  <h4 class="font-semibold text-[#1A1A1A] mb-2">Temperament</h4>
                  <p class="text-gray-700">{{ dog.temperament }}</p>
                </div>
              }
            </div>

            <button (click)="toggleApplicationForm()"
                    class="w-full bg-gradient-to-r from-[#1E88E5] to-[#1976D2] text-white py-4 rounded-xl text-lg font-bold hover:shadow-xl transform hover:scale-105 transition-all duration-300">
              <i class="fas fa-file-alt mr-2"></i>
              Apply to Adopt {{ dog.name }}
            </button>
          </div>
        </div>
      </div>
    </section>

    @if (showApplicationForm) {
      <section id="application-form" class="py-12 px-4 bg-white border-t border-gray-200">
        <div class="max-w-4xl mx-auto">
          <div class="text-center mb-8">
            <h2 class="text-3xl font-bold text-[#1A1A1A] mb-4">Adoption Application Form</h2>
            <p class="text-gray-600">
              Please fill out this form completely. This is the first step in the adoption process.
            </p>
          </div>

          <form [formGroup]="applicationForm" (ngSubmit)="onSubmit()" class="bg-white p-8 rounded-xl shadow-lg">
            <div class="mb-8">
              <h3 class="text-xl font-bold text-[#1A1A1A] mb-4 border-b-2 border-[#1E88E5] pb-2">
                Personal Information
              </h3>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">First Name *</label>
                  <input type="text" formControlName="firstName"
                         class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#1E88E5] focus:outline-none">
                  @if (submitted && f['firstName'].errors) {
                    <p class="text-red-500 text-sm mt-1">First name is required (min 2 characters)</p>
                  }
                </div>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Last Name *</label>
                  <input type="text" formControlName="lastName"
                         class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#1E88E5] focus:outline-none">
                  @if (submitted && f['lastName'].errors) {
                    <p class="text-red-500 text-sm mt-1">Last name is required (min 2 characters)</p>
                  }
                </div>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Email *</label>
                  <input type="email" formControlName="email"
                         class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#1E88E5] focus:outline-none">
                  @if (submitted && f['email'].errors) {
                    <p class="text-red-500 text-sm mt-1">Valid email is required</p>
                  }
                </div>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Phone Number *</label>
                  <input type="tel" formControlName="phone" placeholder="09171234567"
                         class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#1E88E5] focus:outline-none">
                  @if (submitted && f['phone'].errors) {
                    <p class="text-red-500 text-sm mt-1">Valid 10-11 digit phone number required</p>
                  }
                </div>
              </div>
            </div>

            <div class="mb-8">
              <h3 class="text-xl font-bold text-[#1A1A1A] mb-4 border-b-2 border-[#1E88E5] pb-2">
                Address Information
              </h3>
              <div class="space-y-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Street Address *</label>
                  <input type="text" formControlName="address"
                         class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#1E88E5] focus:outline-none">
                  @if (submitted && f['address'].errors) {
                    <p class="text-red-500 text-sm mt-1">Address is required (min 10 characters)</p>
                  }
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">City *</label>
                    <input type="text" formControlName="city"
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#1E88E5] focus:outline-none">
                    @if (submitted && f['city'].errors) {
                      <p class="text-red-500 text-sm mt-1">City is required</p>
                    }
                  </div>

                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Postal Code *</label>
                    <input type="text" formControlName="postalCode" placeholder="1440"
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#1E88E5] focus:outline-none">
                    @if (submitted && f['postalCode'].errors) {
                      <p class="text-red-500 text-sm mt-1">Valid 4-digit postal code required</p>
                    }
                  </div>
                </div>
              </div>
            </div>

            <div class="mb-8">
              <h3 class="text-xl font-bold text-[#1A1A1A] mb-4 border-b-2 border-[#1E88E5] pb-2">
                Additional Information
              </h3>
              <div class="space-y-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Occupation *</label>
                  <input type="text" formControlName="occupation"
                         class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#1E88E5] focus:outline-none">
                  @if (submitted && f['occupation'].errors) {
                    <p class="text-red-500 text-sm mt-1">Occupation is required</p>
                  }
                </div>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Living Situation *</label>
                  <select formControlName="livingStatus"
                          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#1E88E5] focus:outline-none">
                    <option value="">Select...</option>
                    <option value="Own House">Own House</option>
                    <option value="Renting House">Renting House</option>
                    <option value="Apartment">Apartment</option>
                    <option value="Condo">Condo</option>
                    <option value="With Family">Living with Family</option>
                  </select>
                  @if (submitted && f['livingStatus'].errors) {
                    <p class="text-red-500 text-sm mt-1">Please select your living situation</p>
                  }
                </div>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">
                    Why do you want to adopt {{ dog.name }}? * (min 50 characters)
                  </label>
                  <textarea formControlName="reasonForAdoption" rows="4"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#1E88E5] focus:outline-none"></textarea>
                  @if (submitted && f['reasonForAdoption'].errors) {
                    <p class="text-red-500 text-sm mt-1">Please provide detailed reason (min 50 characters)</p>
                  }
                </div>

                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">
                    Previous pet experience * (min 20 characters)
                  </label>
                  <textarea formControlName="experience" rows="4"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#1E88E5] focus:outline-none"></textarea>
                  @if (submitted && f['experience'].errors) {
                    <p class="text-red-500 text-sm mt-1">Please describe your experience (min 20 characters)</p>
                  }
                </div>
              </div>
            </div>

            @if (successMessage) {
              <div class="mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg">
                {{ successMessage }}
              </div>
            }

            @if (errorMessage) {
              <div class="mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg">
                {{ errorMessage }}
              </div>
            }

            <div class="flex gap-4">
              <button type="submit" 
                      [disabled]="submitted && applicationForm.invalid"
                      class="flex-1 bg-[#1E88E5] text-white py-4 rounded-lg text-lg font-bold hover:bg-[#1976D2] transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed">
                Submit Application
              </button>
              <button type="button" (click)="toggleApplicationForm()"
                      class="px-8 bg-gray-300 text-gray-700 py-4 rounded-lg text-lg font-bold hover:bg-gray-400 transition-colors duration-200">
                Cancel
              </button>
            </div>
          </form>
        </div>
      </section>
    }
  }
</div>